## CDN

    웹 캐시 서버들은 전 세계에 분산 배치하고
    원본 서버의 컨텐츠들을 웹 캐시 서버에 캐시해 사용자들에게 서비스함으로써
    웹 컨텐츠를 보다 빠르게 다운로드할 수 있도록 하는 기술

-   동적 컨텐츠 가속
-   프런트엔드 최적화
-   동영상 또는 라이브러리 스트리밍 서비스
-   클라우드 보안

#

## CDN 원리

### CDN 서비스 아키텍처

    원본 서버와 최종 사용자들 사이에 리버스 프록시 서버 형태로 존재

### CDN 동작 방법

1. 브라우저가 IP 주소를 조회할 때 서버 IP 대신 CDN 제공자의 도메인명 반환
2. 해당 도메인명에 대한 IP를 다시 요청
3. CDN 업체의 DNS 서버는 사용자와 가장 가까운 서버의 IP 반환
4. 브라우저는 사용자의 요청을 그 서버로 요청
5. 캐시되어 있으면 빠른 반환, 그렇지 않다면 원본 서버에서 받아와 반환

#

## 다중 캐시 전략

### 캐시 축출

    용량이 일정 한계치에 도달하면 낮은 우선순위부터 삭제

1. 일정 기간 캐시 적중이 없었던 컨텐츠
2. 캐시 적중률이 미미한 컨텐츠
3. 더 오래된 컨텐츠

### 롱테일 컨텐츠

    많이 조회되다가 거의 조회되지 않는 컨텐츠

### 캐시 서버 간 캐시 컨텐츠 공유

    분산된 에지 서버 사이에서 하나의 서버를 사용하는 것처럼 공유된다면
    캐시 적중률이 높아질 것이다.

### 다중 계층 캐시

    에지 서버와 원본 서버 사이에 추가 캐시 서버 계층을 두어
    여러번 캐시하는 방식

-   부모 계층은 원본 서버에 가까이 존재
-   부모 계층의 캐시 서버 수가 자식 계층의 캐시 서버 수가 적어야 함

#### 효과

-   캐시 적중률 향상
-   과도한 트래픽으로부터 원본 서버 보호
-   사용자 요청에 대한 응답 속도 향상

#

## 전달 경로 최적화

### 라스트 마일 최적화

    최종 사용자 요청을 가장 가까운 서버로 전송

-   DNS 기반 에지 선택
-   애니캐스트 기반 에지 선택
    -   다수 노드가 같은 IP 주소를 가짐
    -   실제 가장 가까운 에지 서버가 선택됨

### 프로토콜 최적화

    한 번에 많은 트래픽을 보낼 수 있도록 길을 넓히는 작업

-   TCP 최적화
    -   미들 마일의 네트워크의 관리가 전제되어야 함
    -   혼잡 윈도우 값을 늘려 많은 데이터 패킷을 보낼 수 있게 함
    -   RTO 값을 낮춰 실패한 패킷을 빠르게 재전송
-   TLS 종료와 TCP 연결 재사용

#

## 기타 성능 옵션

### CDN이 대신 제공하는 기본 기능

-   HTTP 압축(gzip)
-   브라우저 캐시
-   HTML, CSS JS 최소화
-   DNS 프리페치와 프리커넥트

### 신기술 적용을 위한 CND 기능

-   HTTP/2와 HTTP/3
-   서버 푸시
-   IPv6 듀얼 스택
